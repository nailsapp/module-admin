!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT ¬© Zeno Rocha
 */
var i;i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=l(n(1)),o=l(n(3)),a=l(n(4));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.resolveOptions(n),i.listenClick(t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===i(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,a.default)(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return d("action",t)}},{key:"defaultTarget",value:function(t){var e=d("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return d("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}]),e}(o.default);function d(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}t.exports=c},function(t,e,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),a=(i=o)&&i.__esModule?i:{default:i},l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return s(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,a.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,a.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=l},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(t),i.removeAllRanges(),i.addRange(r),e=i.toString()}return e}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var s=0,o=i.length;s<o;s++)i[s].fn!==e&&i[s].fn._!==e&&r.push(i[s]);return r.length?n[t]=r:delete n[t],this}},t.exports=n},function(t,e,n){var i=n(5),r=n(6);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!i.string(e))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(i.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}(t,e,n);if(i.string(t))return function(t,e,n){return r(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,n){var i=n(7);function r(t,e,n,i,r){var o=s.apply(this,arguments);return t.addEventListener(n,o,r),{destroy:function(){t.removeEventListener(n,o,r)}}}function s(t,e,n,r){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&r.call(t,n)}}t.exports=function(t,e,n,i,s){return"function"==typeof t.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return r(t,e,n,i,s)})))}},function(t,e){if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}}])},t.exports=i()},function(t,e,n){t.exports=function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(t){return"function"==typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(t,e){return null!=t&&"object"==typeof t&&e in t}var s=RegExp.prototype.test,o=/\S/;function a(t){return!function(t,e){return s.call(t,e)}(o,t)}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},c=/\s*/,d=/\s+/,h=/\s*=/,u=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function f(t){this.string=t,this.tail=t,this.pos=0}function m(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function g(){this.cache={}}f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},m.prototype.push=function(t){return new m(t,this)},m.prototype.lookup=function(t){var e,i,s,o=this.cache;if(o.hasOwnProperty(t))e=o[t];else{for(var a,l,c,d=this,h=!1;d;){if(t.indexOf(".")>0)for(a=d.view,l=t.split("."),c=0;null!=a&&c<l.length;)c===l.length-1&&(h=r(a,l[c])||(i=a,s=l[c],null!=i&&"object"!=typeof i&&i.hasOwnProperty&&i.hasOwnProperty(s))),a=a[l[c++]];else a=d.view[t],h=r(d.view,t);if(h){e=a;break}d=d.parent}o[t]=e}return n(e)&&(e=e.call(this.view)),e},g.prototype.clearCache=function(){this.cache={}},g.prototype.parse=function(t,n){var r=this.cache,s=t+":"+(n||y.tags).join(":"),o=r[s];return null==o&&(o=r[s]=function(t,n){if(!t)return[];var r,s,o,l=!1,m=[],g=[],v=[],b=!1,w=!1,$="",C=0;function k(){if(b&&!w)for(;v.length;)delete g[v.pop()];else v=[];b=!1,w=!1}function x(t){if("string"==typeof t&&(t=t.split(d,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);r=new RegExp(i(t[0])+"\\s*"),s=new RegExp("\\s*"+i(t[1])),o=new RegExp("\\s*"+i("}"+t[1]))}x(n||y.tags);for(var _,S,T,A,I,E,j=new f(t);!j.eos();){if(_=j.pos,T=j.scanUntil(r))for(var N=0,L=T.length;N<L;++N)a(A=T.charAt(N))?(v.push(g.length),$+=A):(w=!0,l=!0,$+=" "),g.push(["text",A,_,_+1]),_+=1,"\n"===A&&(k(),$="",C=0,l=!1);if(!j.scan(r))break;if(b=!0,S=j.scan(p)||"name",j.scan(c),"="===S?(T=j.scanUntil(h),j.scan(h),j.scanUntil(s)):"{"===S?(T=j.scanUntil(o),j.scan(u),j.scanUntil(s),S="&"):T=j.scanUntil(s),!j.scan(s))throw new Error("Unclosed tag at "+j.pos);if(I=">"==S?[S,T,_,j.pos,$,C,l]:[S,T,_,j.pos],C++,g.push(I),"#"===S||"^"===S)m.push(I);else if("/"===S){if(!(E=m.pop()))throw new Error('Unopened section "'+T+'" at '+_);if(E[1]!==T)throw new Error('Unclosed section "'+E[1]+'" at '+_)}else"name"===S||"{"===S||"&"===S?w=!0:"="===S&&x(T)}if(k(),E=m.pop())throw new Error('Unclosed section "'+E[1]+'" at '+j.pos);return function(t){for(var e,n=[],i=n,r=[],s=0,o=t.length;s<o;++s)switch((e=t[s])[0]){case"#":case"^":i.push(e),r.push(e),i=e[4]=[];break;case"/":r.pop()[5]=e[2],i=r.length>0?r[r.length-1][4]:n;break;default:i.push(e)}return n}(function(t){for(var e,n,i=[],r=0,s=t.length;r<s;++r)(e=t[r])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(i.push(e),n=e));return i}(g))}(t,n)),o},g.prototype.render=function(t,e,n,i){var r=this.parse(t,i),s=e instanceof m?e:new m(e,void 0);return this.renderTokens(r,s,n,t,i)},g.prototype.renderTokens=function(t,e,n,i,r){for(var s,o,a,l="",c=0,d=t.length;c<d;++c)a=void 0,"#"===(o=(s=t[c])[0])?a=this.renderSection(s,e,n,i):"^"===o?a=this.renderInverted(s,e,n,i):">"===o?a=this.renderPartial(s,e,n,r):"&"===o?a=this.unescapedValue(s,e):"name"===o?a=this.escapedValue(s,e):"text"===o&&(a=this.rawValue(s)),void 0!==a&&(l+=a);return l},g.prototype.renderSection=function(t,i,r,s){var o=this,a="",l=i.lookup(t[1]);if(l){if(e(l))for(var c=0,d=l.length;c<d;++c)a+=this.renderTokens(t[4],i.push(l[c]),r,s);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)a+=this.renderTokens(t[4],i.push(l),r,s);else if(n(l)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(i.view,s.slice(t[3],t[5]),(function(t){return o.render(t,i,r)})))&&(a+=l)}else a+=this.renderTokens(t[4],i,r,s);return a}},g.prototype.renderInverted=function(t,n,i,r){var s=n.lookup(t[1]);if(!s||e(s)&&0===s.length)return this.renderTokens(t[4],n,i,r)},g.prototype.indentPartial=function(t,e,n){for(var i=e.replace(/[^ \t]/g,""),r=t.split("\n"),s=0;s<r.length;s++)r[s].length&&(s>0||!n)&&(r[s]=i+r[s]);return r.join("\n")},g.prototype.renderPartial=function(t,e,i,r){if(i){var s=n(i)?i(t[1]):i[t[1]];if(null!=s){var o=t[6],a=t[5],l=t[4],c=s;return 0==a&&l&&(c=this.indentPartial(s,l,o)),this.renderTokens(this.parse(c,r),e,i,c)}}},g.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},g.prototype.escapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return y.escape(n)},g.prototype.rawValue=function(t){return t[1]};var y={name:"mustache.js",version:"3.2.1",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,to_html:void 0,Scanner:void 0,Context:void 0,Writer:void 0},v=new g;return y.clearCache=function(){return v.clearCache()},y.parse=function(t,e){return v.parse(t,e)},y.render=function(t,n,i,r){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(e(s=t)?"array":typeof s)+'" was given as the first argument for mustache#render(template, view, partials)');var s;return v.render(t,n,i,r)},y.to_html=function(t,e,i,r){var s=y.render(t,e,i);if(!n(r))return s;r(s)},y.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return l[t]}))},y.Scanner=f,y.Context=m,y.Writer=g,y}()},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(2);var i=class{constructor(t){return t.onRefreshUi((t,e)=>{this.init()}),this}init(){return $(".alert__close:not(.alert__close--initiated)").addClass("alert__close--initiated").on("click",(function(){$(this).closest(".alert").remove()})),this}};var r=class{constructor(t){return t.onRefreshUi((t,e)=>{this.init(e)}),this}init(t){return $("a.confirm",t).on("click",t=>{let e=$(t.currentTarget),n=e.data("body")||"Please confirm you'd like to continue with this action.",i=e.data("title")||"Are you sure?";return n.replace(/\\n/g,"\n"),!n.length||($("<div>").html(n).dialog({title:i,resizable:!1,draggable:!1,modal:!0,dialogClass:"no-close",buttons:{OK:function(){window.location.href=e.attr("href")},Cancel:function(){$(this).dialog("close")}}}),!1)}),this}},s=n(0),o=n.n(s);class a{constructor(t,e){this.$body=$("body"),this.$el=$(e),this.$icon=$("<div>").text("Copied").css({position:"absolute",left:0,top:0,background:"#000000",color:"#ffffff",zIndex:1e6,padding:"0.25rem 0.5rem",borderRadius:"3px",border:"1px solid #ffffff",fontSize:"0.8rem"}),this.clipboardJs=new o.a(e),this.clipboardJs.on("success",e=>{t.log("Item copied!"),this.showIcon(),e.clearSelection()}).on("error",e=>{t.warn("Error",e),e.clearSelection()})}showIcon(){this.$icon.remove(),this.$body.append(this.$icon);this.calcOffsetTop();this.$icon.css({opacity:0,left:this.calcOffsetLeft(),top:this.calcOffsetTop()}).animate({opacity:1},100).delay(250).animate({opacity:0},250),setTimeout(()=>{this.$icon.remove()},600)}calcOffsetLeft(){return this.$el.offset().left+this.$el.outerWidth()/2-this.$icon.outerWidth()/2}calcOffsetTop(){return this.$el.offset().top-this.$icon.outerHeight()-5}}var l=class{constructor(t){$(document).on("admin:js-copy-to-clipboard",(e,n)=>{t.log("Initiating new copy buttons"),$(n).addClass("js-copy-to-clipboard--initiated").each((e,n)=>{$(n).data("clipboardjs")||$(n).data("clipboardjs",new a(t,n))})}),t.onRefreshUi((t,e)=>{$(document).trigger("admin:js-copy-to-clipboard",[".js-copy-to-clipboard"])})}};var c=class{constructor(t){return this.adminController=t,this.processing=!1,this.checkAgain=[],this.adminController.onRefreshUi((t,e)=>{this.init(e)}),this}init(t){this.adminController.log("Initiating new date/time inputs");let e=$(["input.date:not(.datetime--processed)","input.datetime:not(.datetime--processed)","input.time:not(.datetime--processed)"].join(","),t).addClass("datetime--processed");this.adminController.log(`Found ${e.length} unprocessed items`),e.each((t,e)=>{e.classList.contains("date")?this.initDate(e):e.classList.contains("datetime")?this.initDateTime(e):e.classList.contains("time")&&this.initTime(e)})}initDate(t){let e=$(t),n=e.data("datepicker-dateformat")||"yy-mm-dd",i=e.data("datepicker-yearrange")||"c-100:c+10";e.datepicker({dateFormat:n,changeMonth:!0,changeYear:!0,yearRange:i})}initDateTime(t){let e=$(t),n=e.data("datepicker-dateformat")||"yy-mm-dd",i=e.data("datepicker-timeformat")||"HH:mm:ss",r=e.data("datepicker-yearrange")||"c-100:c+10";e.datetimepicker({dateFormat:n,timeFormat:i,changeMonth:!0,changeYear:!0,yearRange:r})}initTime(t){let e=$(t),n=e.data("datepicker-timeformat")||"HH:mm";e.datetimepicker({timeOnly:!0,timeFormat:n})}};var d=class{constructor(){return $(document).on("click",".btn-disabled",()=>!1),this}};var h=class{constructor(t){return this.adminController=t,this.adminController.onRefreshUi((t,e)=>{$(".js-admin-dynamic-table:not(.ready)").addClass("ready").each((t,e)=>{this.init($(e))})}),this}init(t){t.trigger("dynamic-table:starting");let e=t.find(".js-admin-dynamic-table__template"),n=t.find(".js-admin-dynamic-table__body"),i=t.data("data")||[];t.data("template",e.html()),t.data("index",0),n.empty(),this.bindEvents(t,n);for(let e=0,r=i.length;e<r;e++)this.add(t,n,i[e],!1);return t.trigger("dynamic-table:ready"),this}bindEvents(t,e){return $(".js-admin-dynamic-table__add",t).on("click",()=>(this.add(t,e,{},!0),!1)),t.on("click",".js-admin-dynamic-table__remove",e=>(this.remove(t,$(e.currentTarget).closest("tr")),!1)),this}add(t,e,n,i){(n=n||{}).index=t.data("index")||0;let r=$(Mustache.render(t.data("template"),n));return $("input[type=checkbox]",r).each((t,e)=>{let n=$(e);n[0].hasAttribute("data-dynamic-table-checked")&&n.prop("checked",n.attr("data-dynamic-table-checked"))}),$("select",r).each((t,e)=>{let n=$(e);if(n[0].hasAttribute("data-dynamic-table-value")){let t=n.data("dynamic-table-value");$('option[value="'+t+'"]',n).prop("selected",!0)}n.css("width","100%").select2()}),e.append(r),t.data("index",n.index+1),t.trigger("dynamic-table:add",[r]),t.find(".js-admin-sortable").trigger("sortable:sort"),i&&this.adminController.refreshUi(r),this}remove(t,e){return e.remove(),t.trigger("dynamic-table:remove"),t.find(".js-admin-sortable").trigger("sortable:sort"),this}};var u=class{constructor(t){return this.init(),this}init(t){return $(document).on("click",".fancybox",(function(t){t.preventDefault(),t.stopPropagation();let e=$(this).attr("href"),n="iframe";"#"!==e.substr(0,1)?(/^.+.(jpg|png|gif)(\?.*)?$/.test(e)&&(n=null),e+=/\?/.test(e)?"&":"?",e+="isModal=true"):n=null;let i=$(this).data("height"),r=$(this).data("width");return $.fancybox.open({href:e,height:i,width:r,type:n,helpers:{overlay:{locked:!1}},beforeLoad:function(){$("body").addClass("noScroll modal-open")},afterClose:function(){$("body").removeClass("noScroll modal-open")}}),!1})),this}};var p=class{constructor(t){return t.onRefreshUi((t,e)=>{this.init(e)}),this}init(t){return $("td.actions",t).each((t,e)=>{let n=$("> .btn, > .btn-group",e),i=[];n.each((t,e)=>{i.push(e.offsetTop)}),Math.max(...i)!==Math.min(...i)?(n.addClass("btn-block"),n.filter(".btn-group").find("> .btn").addClass("btn-block")):(n.removeClass("btn-block"),n.filter(".btn-group").find("> .btn").removeClass("btn-block"))}),this}};var f=class{constructor(t){return this.helpers=[],t.onRefreshUi((t,e)=>{this.findNewHelpers(e),this.positionHelpers()}),this}findNewHelpers(t){return $("input[data-helper]:not(.input-helper--processed",t).addClass("input-helper--processed").each((t,e)=>{let n=$(e),i=n.data("helper"),r=$("<div>").html(i).insertAfter(n);this.helpers.push({helper:r,input:n})}),this}positionHelpers(){for(let t=0;t<this.helpers.length;t++){let e=this.helpers[t];if(e.input.is(":visible")){let t=`${e.input.outerHeight()}px`;e.helper.css({position:"absolute",background:"rgba(0, 0, 0, 0.07)",border:"1px solid transparent","border-right":"1px solid rgba(0, 0, 0, 0.1)",transform:"translateY(-100%)",height:t,lineHeight:t,padding:"0 0.5rem"}),e.input.css({paddingLeft:e.helper.outerWidth()+7})}}}};class m{constructor(t,e,n){this.adminController=t,this.$trigger=$(e),this.$trigger.data("modalize")instanceof m||(this.target_id=this.coalesce(this.$trigger.data("target-id"),n.target_id),this.title=this.coalesce(this.$trigger.data("title"),n.title),this.width=this.coalesce(this.$trigger.data("width"),n.width),this.max_height=this.coalesce(this.$trigger.data("max-height"),n.max_height),this.target=document.getElementById(this.target_id),this.target?($(this.target).wrapInner("<div></div>").hide(),this.$trigger.on("click",()=>(this.open(),!1))):this.adminController.warn('"'+this.target_id+'" is not a valid ID'))}open(){this.adminController.log("Opening modal"),this.adminController.destroyUi(this.target);let t=$(this.target).find("> div").detach();this.adminController.log(t),this.$modal=$("<div>").html(t).dialog({modal:!0,dialogClass:"no-close no-padding",closeOnEscape:!1,draggable:!1,title:this.title,width:this.width,maxHeight:this.max_height,position:{my:"center",at:"center",of:window},open:()=>{this.adminController.refreshUi(this.$modal)},buttons:{OK:()=>{this.close()}}})}close(t){this.adminController.log("Closing modal"),this.adminController.getInstance("Wysiwyg").destroy(this.$modal);let e=this.$modal.find("> div").detach();$(this.target).append(e),this.$modal.dialog("close").remove(),this.$modal=null}coalesce(){var t=arguments.length;for(let e=0;e<t;e++)if(null!==arguments[e]&&void 0!==arguments[e])return arguments[e];return null}}var g=class{constructor(t){return $(document).on("admin:js-admin-modalize",(t,e,n,i)=>{this.adminController.log("Initiating new modalize buttons"),this.init(e,n,i)}),this.adminController=t,this.adminController.onRefreshUi((t,e)=>{$(document).trigger("admin:js-admin-modalize",[".js-admin-modalize:not(.modalized)",{},e])}),this}init(t,e,n){return e=e||{},$(t,n).each((t,n)=>{$(n).add("modalized").data("modalize",new m(this.adminController,n,e))}),this}};class y{constructor(t){return t.onRefreshUi((t,e)=>{this.init()}),this}init(){return $(".js-admin-notes:not(.processed)").addClass("processed").each((t,e)=>{let n=$(e),i=$("<span>").addClass("admin-notes__counter"),r=n.data("model-name"),s=n.data("model-provider"),o=n.data("id"),a=n.data("modal-title")||"Notes",l=n.data("modal-width")||500,c=n.data("modal-max-height")||750;n.append(i).on("click",()=>{let t=$("<div>").dialog({modal:!0,title:a,width:l,maxHeight:c,position:{my:"center",at:"center",of:window}});return this.load(t,r,s,o),!1}),this.countNotes(r,s,o).done(t=>{this.setCounter(t)})}),this}load(t,e,n,i){t.html($("<p>").text("Loading...")),this.loadNotes(e,n,i).done(r=>{let s=$("<ul>").addClass("admin-notes"),o=$("<li>").addClass("admin-notes__empty").append($("<p>").text("No notes recorded for this item"));if(s.append(o),r.data.length){o.hide();for(let e=0,n=r.data.length;e<n;e++)s.append(this.renderMessageItem(t,r.data[e].id,r.data[e].message,r.data[e].user,r.data[e].date))}let a=$("<li>"),l=$("<textarea>"),c=$("<button>").addClass("btn btn-block btn-primary").text("Add Note").on("click",()=>{this.saveNote(e,n,i,l.val()).done(e=>{l.val(""),$(".admin-notes__empty",t).hide(),a.before(this.renderMessageItem(t,e.data.id,e.data.message,e.data.user,e.data.date)),this.setCounter(t.length).centerModal(t,!0)})});s.append(a.append(l).append(c)),t.html(s),this.centerModal(t,!0)})}centerModal(t,e){return t.dialog("option","position",{my:"center",at:"center",of:window}),e&&t.animate({scrollTop:t.find(".admin-notes").outerHeight()},200),this}countNotes(t,e,n){let i=new $.Deferred;return $.ajax({url:window.SITE_URL+"api/admin/note/count",data:{model_name:t,model_provider:e,item_id:n}}).done(t=>{i.resolve(t.data)}).fail(t=>{y.showError(t.responseText),i.reject(t.responseText)}),i.promise()}loadNotes(t,e,n){let i=new $.Deferred;return $.ajax({url:window.SITE_URL+"api/admin/note",data:{model_name:t,model_provider:e,item_id:n}}).done(t=>{i.resolve(t)}).fail(t=>{y.showError(t.responseText),i.reject(t.responseText)}),i.promise()}saveNote(t,e,n,i){let r=new $.Deferred;return $.ajax({url:window.SITE_URL+"api/admin/note",method:"POST",data:{model_name:t,model_provider:e,item_id:n,message:i}}).done(t=>{r.resolve(t)}).fail(t=>{y.showError(t.responseText),r.reject(t.responseText)}),r.promise()}deleteNote(t){let e=new $.Deferred;return $.ajax({url:window.SITE_URL+"api/admin/note/"+t,method:"DELETE"}).done(t=>{e.resolve(t)}).fail(t=>{y.showError(t.responseText),e.reject(t.responseText)}),e.promise()}renderMessageItem(t,e,n,i,r){let s=$("<li>").addClass("admin-notes__note"),o=$("<div>").addClass("admin-notes__note__message").html(n),a=$("<button>").addClass("admin-notes__note__delete").html("&times;"),l=$("<div>").addClass("admin-notes__note__meta"),c=$("<span>").addClass("admin-notes__note__meta__user").html(i.first_name+" "+i.last_name),d=$("<span>").addClass("admin-notes__note__meta__date").html(r);return a.on("click",()=>(this.deleteNote(e).done(()=>{s.remove(),this.centerModal(t,!1);let e=$(".admin-notes__note",t).length;this.setCounter(e),0===e&&$(".admin-notes__empty",t).show()}),!1)),s.append(o).append(a).append(l.append(c).append(d))}setCounter(t){return $(".admin-notes__counter").text(t||""),this}static showError(t){let e;try{e=JSON.parse(t)}catch(t){e={error:"An unknown error occurred"}}alert(e.error)}}var v=y,b=n(1),w=n.n(b);class C{constructor(t,e,n){return this.adminController=t,this.$element=e,this.index=0,this.trigger("constructing"),this.$target=$(".js-admin-repeater__target",this.$element),this.$add=$(".js-admin-repeater__add",this.$element),this.template=$(".js-admin-repeater__template",this.$element).html(),$(".js-admin-repeater__template",this.$element).remove(),this.bindEvents(),this.load(n||[]),this.trigger("constructed"),this}bindEvents(){this.trigger("binding"),this.$add.on("click",t=>(this.add(),!1)),this.$target.on("click",".js-admin-repeater__remove",t=>(this.remove($(t.currentTarget)),!1)),this.$element.on("js-admin-repeater:load",(t,e)=>{this.load(e)}).on("js-admin-repeater:clear",t=>{this.reset()}),this.trigger("bound")}add(t){(t=t||{}).index=this.index,this.trigger("adding",t);let e=$("<li>").addClass("js-admin-repeater__target__item"),n=this.template;n=w.a.render(n,t),e.html(n),$("input[type=checkbox]",e).each((t,e)=>{let n=$(e);n[0].hasAttribute("data-repeater-checked")&&n.prop("checked",n.attr("data-repeater-checked"))}),$("select",e).each((t,e)=>{let n=$(e);if(n[0].hasAttribute("data-repeater-value")){let t=n.data("repeater-value");$('option[value="'+t+'"]',n).prop("selected",!0)}n.css("width","100%").select2()}),this.$target.append(e),this.index++,this.$element.find(".js-admin-sortable").trigger("sortable:sort"),this.noRefresh||this.adminController.refreshUi(e),this.trigger("added")}remove(t){let e=t.closest(".js-admin-repeater__target__item");this.trigger("removing",e),e.remove(),this.$element.find(".js-admin-sortable").trigger("sortable:sort"),this.trigger("removed",e)}load(t){this.trigger("loading",t),this.noRefresh=!0;for(let e in t)t.hasOwnProperty(e)&&this.add(t[e]);this.noRefresh=!1,this.adminController.refreshUi(this.$element),this.trigger("loaded",t)}reset(){this.trigger("resetting"),$(".js-admin-repeater__target__item",this.$target).remove(),this.index=0,this.trigger("reset")}trigger(t,e){let n={instance:this,data:e};this.adminController.log("Triggering Event: "+t,n)}}var k=class{constructor(t){return this.adminController=t,this.adminController.onRefreshUi((t,e)=>{this.init(e)}),this}init(t){return $(".js-admin-repeater:not(.processed)",t).addClass("processed").each((t,e)=>{let n=$(e),i=new C(this.adminController,n,n.data("data"));n.data("js-admin-repeater-instance",i)}),this}};class x{constructor(t,e,n){this.adminController=t,this.group=e,this.$control=$(n),this.elements=[],this.$control.on("change",()=>{this.toggle(this.getControlValue())})}findNewElements(t){return $(`[data-revealer="${this.group}"]:not(.processed)`,t).filter(":not(input[type=checkbox], select)").addClass("processed").each((t,e)=>{this.elements.push(new _(e))}),this.$control.trigger("change"),this}getControlValue(){let t;return t=this.$control.is("select")?this.$control.val():this.$control.is(":checked"),t}toggle(t){this.adminController.log("Toggling elements for value",t);for(let e=0;e<this.elements.length;e++)this.elements[e].isShown(t)?this.elements[e].show():this.elements[e].hide()}destroy(){this.$control.removeClass("processed");for(let t=0;t<this.elements.length;t++)this.elements[t].destroy()}}class _{constructor(t){this.$element=$(t),this.value=this.$element.data("reveal-on")}isShown(t){return"boolean"==typeof t&&"boolean"!=typeof this.value?t&&1===this.value||!t&&0===this.value:this.value===t}show(){return this.$element.show(),this}hide(){return this.$element.hide(),this}destroy(){this.$element.removeClass("processed"),this.show()}}var S=class{constructor(t){return this.groups={},this.adminController=t,this.adminController.onRefreshUi((t,e)=>{this.init(e)}).onDestroyUi((t,e)=>{this.destroy(e)}),this}init(t){return $("[data-revealer]:not(.processed):not([data-reveal-on])",t).filter(":input").filter("input[type=checkbox], select").addClass("processed").each((e,n)=>{let i=$(n).data("revealer");void 0===this.groups[i]?(this.groups[i]=new x(this.adminController,i,n),this.groups[i].findNewElements(t)):this.adminController.warn(`Duplicate group "${i}"`)}),this}destroy(t){for(let e in this.groups)this.groups.hasOwnProperty(e)&&(null===t||$.contains(t,this.groups[e].$control))&&(this.groups[e].destroy(),delete this.groups[e])}};var T=class{constructor(t){let e,n,i;return e=$("div.field.error:visible"),e.length?i=$(e.get(0)):(n=$("div.system-alert.error:visible"),i=$(n.get(0))),i.length&&setTimeout(()=>{$.scrollTo(i,"fast",{axis:"y",offset:{top:-60}})},750),this}};class A{constructor(t,e,n){this.$input=$(e),this.adminController=t,this.$input.data("searcher")instanceof A||(this.api=this.coalesce(this.$input.data("api"),n.api),this.isMultiple=this.coalesce(this.$input.data("multiple"),n.isMultiple,!1),this.isClearable=this.coalesce(this.$input.data("clearable"),n.isClearable,!0),this.placeholder=this.coalesce(this.$input.data("placeholder"),n.placeholder,"Search for an item"),this.minLength=this.coalesce(this.$input.data("min-length"),n.minLength,2),this.getParam=this.coalesce(this.$input.data("get-param"),n.getParam,"search"),this.formatter=this.coalesce(n.formatter,null),this.propId=this.coalesce(this.$input.data("prop-id"),n.propId,"id"),this.propLabel=this.coalesce(this.$input.data("prop-label"),n.propLabel,"label"),this.api?this.$input.removeClass("js-searcher").select2({placeholder:this.placeholder,minimumInputLength:this.minLength,multiple:this.isMultiple,allowClear:this.isClearable,ajax:{url:window.SITE_URL+"api/"+this.api,dataType:"json",quietMillis:250,data:t=>{let e={};return e[this.getParam]=t,e},results:t=>({results:this.formatResults(t.data)}),cache:!0},initSelection:(t,e)=>{let n=$(t).val();""!==n&&this.isMultiple?$.ajax({url:window.SITE_URL+"api/"+this.api+"?ids="+n,dataType:"json"}).done(t=>{e(this.formatResults(t.data))}):""!==n&&$.ajax({url:window.SITE_URL+"api/"+this.api+"/"+n,dataType:"json"}).done(t=>{e(this.formatResult(t.data))})}}):this.adminController.warn("Element is configured as a Searcher but no api has been defined",this.$input))}formatResults(t){let e=[];for(let n=0;n<t.length;n++)e.push(this.formatResult(t[n]));return e}formatResult(t){return"function"==typeof this.formatter?this.formatter.call(this,t):{id:t[this.propId],text:t[this.propLabel]}}coalesce(){var t=arguments.length;for(let e=0;e<t;e++)if(null!==arguments[e]&&void 0!==arguments[e])return arguments[e];return null}}var I=class{constructor(t){return this.adminController=t,$(document).on("admin:js-searcher",(t,e,n,i)=>{this.adminController.log("Initiating new searchers"),this.init(e,n,i)}),this.adminController.onRefreshUi((t,e)=>{$(document).trigger("admin:js-searcher",[".js-searcher:not(.processed)",{},e])}),this}init(t,e,n){return e=e||{},$(t,n).each((t,n)=>{$(n).add("processed").data("searcher",new A(this.adminController,n,e))}),this}};var E=class{constructor(t){return t.onRefreshUi((t,e)=>{this.init(e)}),this}init(t){return $("select.select2:not(.select2-offscreen):not(.select2--processed)",t).addClass("select2--processed").select2(),this}};var j=class{constructor(t){return t.onRefreshUi((t,e)=>{this.init(e)}),this}init(t){return $(".js-admin-sortable:not(.processed)",t).addClass("processed").each((function(){let t=$(this),e=t.data("handle")||null,n=t.data("axis")||"y",i=t.data("containment")||"parent";t.sortable({handle:e,axis:n,containment:i,forceHelperSize:!0,helper:function(t,e){let n=e.children(),i=e.clone();return i.children().each((function(t){$(this).width(n.eq(t).outerWidth())})),i},stop:function(){t.trigger("sortable:sort")}}).on("sortable:sort",()=>{t.find(".js-admin-sortable__order").each((function(t){$(this).val(t)}))}),e&&t.find(e).addClass("js-admin-sortable__handle")})),this}};var N=class{constructor(t){return t.onRefreshUi((t,e)=>{this.init(e)}),this}init(t){return $("fieldset,.fieldset",t).each((function(){$("div.field",this).removeClass("odd even"),$("div.field:visible:odd",this).addClass("odd"),$("div.field:visible:even",this).addClass("even")})),this}};class L{constructor(t,e){return this.slug=t,this.adminController=e,this.controls=[],this.panels=[],this.input=document.querySelectorAll('input[data-tabgroup="'+this.slug+'"]'),this.defaultTabSet=!1,this}addControl(t){this.controls.push(t)}addPanel(t){this.panels.push(t)}setDefaultActiveTab(){if(this.defaultTabSet)return this;this.defaultTabSet=!0;for(let t=0;t<this.controls.length;t++){let e=this.controls[t].getTarget();for(let t=0;t<this.panels.length;t++){let n=this.panels[t];if(n.targets(e)&&n.containsError())return this.goTo(e),this}}return this.input.length&&this.input[0].value.length?(this.goTo(this.input[0].value),this):(this.controls.length>0&&this.goTo(this.controls[0].getTarget()),this)}setControlsWithErrors(){for(let t=0;t<this.controls.length;t++){let e=this.controls[t].getTarget();for(let n=0;n<this.panels.length;n++){let i=this.panels[n];i.targets(e)&&(i.containsError()?this.controls[t].setError():this.controls[t].setNoError())}}}goTo(t){let e;for(e=0;e<this.controls.length;e++)this.controls[e].targets(t)?this.controls[e].setActive():this.controls[e].setInactive();for(e=0;e<this.panels.length;e++)this.panels[e].targets(t)?this.panels[e].setActive():this.panels[e].setInactive();if(this.input.length)for(let e=0;e<this.input.length;e++)this.input[e].value=t;this.adminController.refreshUi()}}class U{constructor(t,e){return this.group=t,this.element=e,this.link=this.element.querySelector("a"),this.target=this.link.dataset.tab,this.element.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.group.goTo(this.target)}),this}getTarget(){return this.target}targets(t){return this.target===t}isActive(){return this.element.classList.contains("active")}setActive(){return this.element.classList.add("active"),this}setInactive(){return this.element.classList.remove("active"),this}setError(){return this.link.classList.add("error"),this}setNoError(){return this.link.classList.remove("error"),this}}class M{constructor(t,e){return this.group=t,this.element=e,this}targets(t){return this.element.classList.contains(t)}isActive(){return this.element.classList.contains("active")}setActive(){this.element.classList.add("active")}setInactive(){this.element.classList.remove("active")}containsError(){let t=this.element.querySelectorAll("div.field.error, .system-alert.error, .alert.alert-danger, .error.show-in-tabs");return null!==t&&t.length>0}}var R=class{constructor(t){return this.adminController=t,this.groups={},this.adminController.onRefreshUi((t,e)=>{this.init()}),this}init(){this.prepareDomElements().instantiateTabs();for(let t in this.groups)this.groups.hasOwnProperty(t)&&this.groups[t].setDefaultActiveTab().setControlsWithErrors();return this}prepareDomElements(){let t=["ul.tabs","section.tabs"];for(let e=0;e<t.length;e++){let n=0,i=document.querySelectorAll(t[e]+":not(.ready)");for(let t=0;t<i.length;t++)void 0===i[t].dataset.tabgroup&&i[t].setAttribute("data-tabgroup","tab-group-"+n++)}return this}instantiateTabs(){let t,e,n,i,r;for(t=document.querySelectorAll("ul.tabs:not(.ready)"),n=0;n<t.length;n++){for(i=t[n].dataset.tabgroup,this.groups.hasOwnProperty(i)||(this.groups[i]=new L(i,this.adminController)),e=t[n].querySelectorAll("li.tab"),r=0;r<e.length;r++)this.groups[i].addControl(new U(this.groups[i],e[r]));t[n].classList.add("ready")}for(t=document.querySelectorAll("section.tabs:not(.ready)"),n=0;n<t.length;n++){for(i=t[n].dataset.tabgroup,e=t[n].querySelectorAll("div.tab-page"),r=0;r<e.length;r++)this.groups[i].addPanel(new M(this.groups[i],e[r]));t[n].classList.add("ready")}return this}};class D{constructor(t,e){this.adminController=t,this.$timecode=e,this.$seconds=e.next(".js-timecode-input"),this.$error=this.$seconds.next(".js-timecode-error"),this.$timecode.on("change",()=>{this.hideError()}).on("blur",t=>{try{this.setSeconds(this.convertTimecodeToSeconds(t.currentTarget.value))}catch(t){this.showError(t.message)}}),this.$seconds.on("change",()=>{this.hideError()}).on("blur",t=>{this.setTimeCode(this.convertSecondsToTimecode(t.currentTarget.value))}),this.$timecode.val(this.convertSecondsToTimecode(this.$seconds.val()))}setTimeCode(t){this.$timecode.val(t||"00:00:00")}setSeconds(t){this.$seconds.val(t||0)}showError(t){this.adminController.log(t),this.$error.text(t).addClass("alert alert-danger")}hideError(){this.$error.text("").removeClass("alert alert-danger")}convertTimecodeToSeconds(t){if(!/^\d{2,}:[0-5]\d:[0-5]\d$/.test(t))throw Error("Invalid timecode (expected format: hh:mm:ss)");let e=t.split(":");return 60*parseInt(e[0])*60+60*parseInt(e[1])+parseInt(e[2])}convertSecondsToTimecode(t){let e=0,n=0,i=0;if(e=t%60,n=(t-e)/60,n>59){let t=n%60;i=Math.floor(n/60),n=t}return[this.pad(i),this.pad(n),this.pad(e)].join(":")}pad(t){return t<10?"0"+t:t.toString()}}var P=class{constructor(t){return this.adminController=t,this.instances=[],this.adminController.onRefreshUi((t,e)=>{this.init(e)}),this}init(t){let e=$(".js-timecode:not(.processed)").addClass("processed");e.length&&(this.adminController.log(`Found ${e.length} new timecode inputs`),e.each((t,e)=>{this.instances.push(new D(this.adminController,$(e)))}))}};var O=class{constructor(t){return t.onRefreshUi((t,e)=>{this.init(e)}),this}init(t){return $("*[rel=tipsy]:not(.drunk)",t).addClass("drunk").tipsy({opacity:.85}),$("*[rel=tipsy-html]:not(.drunk)",t).addClass("drunk").tipsy({opacity:.85,html:!0}),$("*[rel=tipsy-right]:not(.drunk)",t).addClass("drunk").tipsy({opacity:.85,gravity:"w"}),$("*[rel=tipsy-left]:not(.drunk)",t).addClass("drunk").tipsy({opacity:.85,gravity:"e"}),$("*[rel=tipsy-top]:not(.drunk)",t).addClass("drunk").tipsy({opacity:.85,gravity:"s"}),$("*[rel=tipsy-bottom]:not(.drunk)",t).addClass("drunk").tipsy({opacity:.85,gravity:"n"}),this}};class H{constructor(t){this.container=t,this.checkbox=this.container.next("input[type=checkbox]"),this.is_readonly=this.checkbox.hasClass("readonly"),this.width=this.checkbox.data("toggle-width")||"100px",this.height=this.checkbox.data("toggle-height")||"30px",this.text_on=this.checkbox.data("text-on")||"ON",this.text_off=this.checkbox.data("text-off")||"OFF",this.checkbox.hide(),this.container.addClass("toggled").css({width:this.width,height:this.height,"text-align":"center"}).toggles({checkbox:this.checkbox,click:!this.is_readonly,drag:!this.is_readonly,clicker:this.checkbox,on:this.checkbox.is(":checked"),text:{on:this.text_on,off:this.text_off}}).on("toggle",(t,e)=>{this.checkbox.trigger("toggle",[e]).trigger("change")})}destroy(){this.container.empty().removeClass("toggled").removeAttr("style"),this.checkbox.show()}}var F=class{constructor(t){return t.onRefreshUi((t,e)=>{this.init(e)}).onDestroyUi((t,e)=>{this.destroy(e)}),this}init(t){return $(".form-bool:not(.toggled)",t).each((function(){$(this).data("instance",new H($(this)))})),this}destroy(t){return $(".form-bool.toggled",t).each((t,e)=>{$(e).data("instance").destroy()}),this}};class q{constructor(t,e,n){this.adminController=t,this.container=e,this.config=n,this.adminController.log("Constructing",this.container),this.container.addClass("wysiwyged").ckeditor({customConfig:this.container.hasClass("wysiwyg-basic")?this.config.basic:this.config.default})}destroy(){this.adminController.log("Destroying",this.container),this.container.removeClass("wysiwyged").ckeditor((function(){this.destroy()})).data("instance",null)}}var z=class{constructor(t){return this.ready=!1,this.adminController=t,this.config={basic:window.NAILS.URL+"js/ckeditor.config.basic.min.js",default:window.NAILS.URL+"js/ckeditor.config.default.min.js"},t.onRefreshUi((t,e)=>{this.init(e)}).onDestroyUi((t,e)=>{this.destroy(e)}),$.ajax({url:window.SITE_URL+"api/admin/ckeditor/configs"}).done(t=>{this.config.basic=t.data.basic,this.config.default=t.data.default,this.ready=!0,this.adminController.log("Ready"),this.init(document)}).fail(t=>{this.adminController.warn("Failed to fetch configs. Falling back to default configuration"),this.ready=!0,this.adminController.log("Ready"),this.init(document)}),this}init(t){return this.ready&&(this.adminController.log("Initiating new WYSIWYG",t),$("textarea.wysiwyg:not(.wysiwyged)",t).each((t,e)=>{$(e).data("instance",new q(this.adminController,$(e),this.config))})),this}destroy(t){return $("textarea.wysiwyg.wysiwyged",t).each((t,e)=>{$(e).data("instance").destroy()}),this}};let W,V;V=function(t,e,n){return{vendor:t,slug:e,getInstance:function(t,e){return window.NAILS.ADMIN.getInstance(t,e)},onRefreshUi:function(t){return window.NAILS.ADMIN.onRefreshUi(t),this},refreshUi:function(t){return this.log("üôã‚Äç‚ôÄÔ∏è UI refresh requested",t||document),window.NAILS.ADMIN.refreshUi(t),this},destroyUi:function(t){return window.NAILS.ADMIN.destroyUi(t),this},onDestroyUi:function(t){return window.NAILS.ADMIN.onDestroyUi(t),this},log:function(){"function"==typeof console.log&&console.log(`%c[${this.vendor}: ${this.slug}]`,"color: goldenrod",...arguments)},warn:function(){"function"==typeof console.warn&&console.warn(`%c[${this.vendor}: ${this.slug}]`,"color: goldenrod",...arguments)},error:function(){"function"==typeof console.error&&console.error(`%c[${this.vendor}: ${this.slug}]`,"color: goldenrod",...arguments)}}},W=function(){return{namespace:"nails/module-admin",instances:{},getInstance:function(t,e){return e=e||window.NAILS.ADMIN.namespace,window.NAILS.ADMIN.instances[e][t]},registerPlugin:function(t,e,n){return void 0===this.instances[t]&&(this.instances[t]={}),this.instances[t][e]="function"==typeof n?n(new V(t,e)):n,this},trigger:function(t,e){return document.dispatchEvent(new CustomEvent(t,{detail:e})),this},on:function(t,e){return document.addEventListener(t,e),this},refreshUiSet:new Set,refreshUi:function(t){return t=t||document,this.uiIsRefreshing&&this.refreshUiSet.add(t),this.refreshUiSet.add(t),clearTimeout(this.refreshTimeout),this.refreshTimeout=setTimeout(()=>{this.refreshUiSet.size>0&&(this.uiIsRefreshing=!0,this.log(`üîÑ Refreshing UI (${this.refreshUiSet.size} items)`),this.refreshUiSet.forEach(t=>{this.log("üë∑‚Äç‚ôÇÔ∏è Refreshing:",t),this.trigger("admin:refresh-ui",{domElement:t}),this.refreshUiSet.delete(t),this.log("üôåüèª Refreshed:",t)}),this.log("‚úÖ Refreshed UI"),this.uiIsRefreshing=!1)},10),this},onRefreshUi:function(t){return this.on("admin:refresh-ui",(function(e){t(e,e.detail?e.detail.domElement:null)})),this},destroyUi:function(t){return this.log("Destroying UI",t||document),this.trigger("admin:destroy-ui",{domElement:t||document}),this},onDestroyUi:function(t){return this.on("admin:destroy-ui",(function(e){t(e,e.detail?e.detail.domElement:null)})),this},log:function(){"function"==typeof console.log&&console.log(`%c[${this.namespace}]`,"color: goldenrod",...arguments)},warn:function(t,e){"function"==typeof console.warn&&console.warn(`%c[${this.namespace}]`,"color: goldenrod",...arguments)}}},window.NAILS.ADMIN=new W,window.NAILS.ADMIN.registerPlugin(window.NAILS.ADMIN.namespace,"Alerts",(function(t){return new i(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Confirm",(function(t){return new r(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"CopyToClipboard",(function(t){return new l(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"DateTime",(function(t){return new c(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"DisabledElements",(function(t){return new d(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"DynamicTable",(function(t){return new h(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Fancybox",(function(t){return new u(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"IndexButtons",(function(t){return new p(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"InputHelper",(function(t){return new f(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Modalize",(function(t){return new g(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Notes",(function(t){return new v(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Repeater",(function(t){return new k(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Revealer",(function(t){return new S(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"ScrollToFirstError",(function(t){return new T(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Searcher",(function(t){return new I(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Select",(function(t){return new E(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Sortable",(function(t){return new j(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Stripes",(function(t){return new N(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Tabs",(function(t){return new R(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"TimeCode",(function(t){return new P(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Tipsy",(function(t){return new O(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Toggles",(function(t){return new F(t)})).registerPlugin(window.NAILS.ADMIN.namespace,"Wysiwyg",(function(t){return new z(t)}))}]);